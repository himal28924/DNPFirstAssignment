@using Contracts
@using Entities.Model
@page "/Forum"
@inject IForumService forumService
@inject NavigationManager navMgr
@inject IAuthService authService
<h3>Forum</h3>

<AuthorizeView>
    <NotAuthorized>
        <p> Please go to login</p>

    </NotAuthorized>
    <Authorized >
        <div class="field">
            <label>Title</label>
            <input type="text" @bind="title"/>
        </div>
        <div class="field">
            <label style="text-align: center">Description : </label>
            <input type="text" @bind="description"/>
        </div>
       
        <div class="field">
            <button class="loginbtn" @onclick="AddForumAsync">Create Forum</button>
        </div>

    </Authorized>
</AuthorizeView>


@code {
    private string title;
    private string description;
    private string errorLabel = "";
    private string currentUser= "Himal";


    private async Task AddForumAsync()
    {
        try
        {
            Console.Write("add");
            Entities.Model.Forum forum = new Entities.Model.Forum(title,description,currentUser); 
            await forumService.AddForumAsync(forum);

            navMgr.NavigateTo("/");
        }
        catch (Exception e)
        {
            errorLabel = "Sorry couldn't add the forum";
        }
    }



}

}